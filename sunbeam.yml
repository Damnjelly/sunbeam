---
# yaml-language-server: $schema=./schemas/schema_v2.json
name: github
title: GitHub
rootItems:
  - title: List My Repositories
    type: push
    page: list-repositories
    with:
      owner: me
  - title: List Dailymotion Repositories
    type: push
    page: list-repositories
    with:
      owner: me
  - title: List Airflow Pull Requests
    type: push
    page: list-repositories
    with:
      repository: dailymotion/dwh-dags
pages:
  list-repositories:
    type: list
    title: List Repositories
    script:
      command: "./list-repositories.sh {{ .inputs.owner }}"
      inputs:
        - name: owner
          title: Owner
          type: textfield
          description: The owner of the repositories to list
    actions:
      - type: open
        url: "{{ .output.full_url }}"
      - shortcut: ctrl+p
        title: List Pull Requests
        type: push
        page: list-pull-requests
        with:
          owner: "{{ .output.full_name }}"
  list-pull-requests:
    title: List Pull Requests
    type: list
    script:
      command: "./list-pull-requests.sh {{ .inputs.repository }}"
      inputs:
        - name: repository
          title: Repository
          type: textfield
          description: The repository to list pull requests for
    actions:
      - shortcut: enter
        type: open
        url: "{{ .output.html_url }}"
---
# yaml-language-server: $schema=./schemas/schema_v2.json
name: file-browser
title: File Browser
rootItems:
  - title: Browse Directory
    type: push
    page: browse-directory
  - title: Browse Home Directory
    type: push
    push: browse-directory
    with:
      directory: "{{ .env.HOME }}"
  - title: Browse Root Directory
    type: push
    push: browse-directory
    with:
      directory: "/"
  - title: Browse Current Directory
    type: push
    push: browse-directory
    with:
      directory: "{{ .env.PWD }}"
pages:
  file-browser:
    title: File Browser
    type: list
    script:
      command: "./file-browser.mjs {{ inputs.directory }}"
      inputs:
        - name: directory
          title: Directory
          type: textfield
          placeholder: Select a directory
    actions:
      - shortcut: enter
        if: "{{ output.isDirectory }}"
        push: file-browser
        with:
          directory: "{{ output.path }}"
      - shortcut: enter
        if: "{{ !output.isDirectory }}"
        run: open-file
        with:
          file: "{{ output.path }}"
