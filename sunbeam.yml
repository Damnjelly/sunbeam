---
# yaml-language-server: $schema=./schemas/schema.json
name: github
version: "1.0"
title: GitHub
rootItems:
  - title: List My Repositories
    script: list-repositories
    with:
      owner: pomdtr
  - title: List Repositories
    script: list-repositories
  - title: List Dailymotion Repositories
    script: list-repositories
    with:
      owner: dailymotion
  - title: List Airflow Pull Requests
    script: list-pull-requests
    with:
      repository: dailymotion/dwh-dags
scripts:
  list-repositories:
    title: List Repositories
    command: ./examples/github/list-repos.sh ${{ input "owner" }}
    onSuccess: push-page
    page:
      type: list
      mode: filter
      showPreview: true
    inputs:
      - name: owner
        title: Owner
        type: textfield
        required: false
  list-pull-requests:
    command: examples/github/list-prs.sh ${{ input "repository" }}
    onSuccess: push-page
    page:
      type: list
      mode: filter
    inputs:
      - name: repository
        title: Repository
        type: textfield
---
# yaml-language-server: $schema=./schemas/schema.json
name: file-browser
version: "1.0"
title: File Browser
rootItems:
  - title: Browse Custom Directory
    script: file-browser
  - title: Browse Root Directory
    script: file-browser
    with:
      root: "/"
  - title: Browse Current Directory
    script: file-browser
    with:
      root: "."
scripts:
  file-browser:
    command: ./examples/file-browser.py --root ${{ input "root" }}
    onSuccess: push-page
    page:
      type: "list"
      mode: filter
    inputs:
      - name: root
        title: Root
        type: textfield
        placeholder: Select a directory
---
# yaml-language-server: $schema=./schemas/schema.json
name: bitwarden
version: "1.0"
title: Bitwarden
rootItems:
  - title: Search Passwords
    script: list-passwords
scripts:
  list-passwords:
    command: ./examples/bitwarden.sh
    onSuccess: push-page
    page:
      type: list
      mode: filter
---
# yaml-language-server: $schema=./schemas/schema.json
name: jira
version: "1.0"
title: Jira
rootItems:
  - title: List Issues
    script: list-issues
    with:
      jql: assignee=currentUser() and status!=Closed
scripts:
  list-issues:
    command: ./examples/jira.sh ${{ input "jql" }}
    onSuccess: push-page
    page:
      type: list
      mode: filter
    inputs:
      - name: jql
        title: JQL
        type: textfield
---
# yaml-language-server: $schema=./schemas/schema.json
name: google
title: Google
version: "1.0"
rootItems:
  - title: Google Suggestions
    script: google-suggestions
scripts:
  google-suggestions:
    command: ./examples/google.mjs --query ${{ query }}
    onSuccess: push-page
    page:
      type: list
      mode: generator
---
# yaml-language-server: $schema=./schemas/schema.json
name: random
title: Random
version: "1.0"
rootItems:
  - title: "Generate 5 random numbers"
    script: "random-list"
  - title: "Random Number"
    script: "random-number"
scripts:
  random-list:
    command: ./examples/random_list.py
    onSuccess: push-page
    page:
      type: list
      mode: filter
---
# yaml-language-server: $schema=./schemas/schema.json
name: sunbeam
title: Sunbeam
version: "1.0"
rootItems:
  - title: "Search Extensions"
    script: search-extensions
scripts:
  search-extensions:
    command: |
      gh api '/search/repositories?q=topic:sunbeam-extension' \
        --jq '.items[] | {
            title: .full_name,
            subtitle: .description,
            actions: [
              { type: "open-url", title: "Open in Browser", url: .html_url },
              { type: "exec-command", title: "Install Extension", command: "sunbeam extension install \(.html_url)" }
            ],
            accessories: [
              .owner.login
            ]
        }'
    onSuccess: push-page
    page:
      type: list
      mode: filter
---
# yaml-language-server: $schema=./schemas/schema.json
name: tldr
title: TLDR Pages
version: "1.0"
rootItems:
  - title: "Search MacOS Pages"
    script: list
    with:
      platform: osx
  - title: "Search Linux Pages"
    script: list
    with:
      platform: linux
scripts:
  list:
    command: |
      tldr --list --platform ${{ input "platform" }} | sunbeam query -R '{
        id: .,
        title: .,
        previewCmd: "tldr --color always --platform  ${{ input "platform" }} \(.)",
        actions: [
          {"type": "open-url", "url": "https://tldr.ostera.io/${{ input "platform" }}/\(.)", "title": "Open in Browser"}
        ]
      }'
    inputs:
      - name: platform
        type: dropdown
        title: Platform
        data:
          - title: Windows
            value: windows
          - title: MacOS
            value: macos
          - title: Linux
            value: linux
    onSuccess: push-page
    page:
      type: list
      mode: filter
      showPreview: true
---
# yaml-language-server: $schema=./schemas/schema.json
version: "1.0"
title: Date Utils
name: date
rootItems:
  - script: utc
    title: Copy UTC Timestamp
scripts:
  utc:
    command: date +%Y-%m-%dT%H:%M:%SZ | tr -d '\n'
    onSuccess: copy-to-clipboard
