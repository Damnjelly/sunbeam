name: tldr
title: TLDR Pages
version: "1.0"
rootItems:
  - title: "Search MacOS Pages"
    script: list
    with:
      platform:
        value: osx
  - title: "Search Linux Pages"
    script: list
    with:
      platform:
        value: linux
scripts:
  list:
    command: |
      tldr --list --platform {{ platform }} | sunbeam query -R '{
        id: .,
        title: .,
        previewCmd: "tldr --color always --platform  {{ platform }} \(.)",
        actions: [
          {"type": "open-url", "url": "https://tldr.ostera.io/\(.)", "title": "Open in Browser"}
        ]
      }'
    params:
      platform:
        type: string
        enum:
          - linux
          - osx
          - windows

    onSuccess: push-page
    page:
      type: list
      mode: filter
      showPreview: true
