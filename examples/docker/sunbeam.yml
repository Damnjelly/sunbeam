title: Docker
version: "1.0"
requirements:
  - homePage: https://www.docker.com/
    which: docker
rootItems:
  - script: listContainer
    title: List Containers
scripts:
  listContainer:
    command: |
      docker ps --all --format '{{ json . }}' | sunbeam query '
      {
        title: .Names,
        subtitle: .Image,
        accessories: [ .State ],
        actions: [
          {type: "run-script", title: "Open Shell", script: "execCommandInContainer", "with": {"container": .Names, "command": "bash"}}
        ]
      }
      '
    mode: filter
  execCommandInContainer:
    command: |
      docker exec -it ${{ container }} ${{ command }} | less
    mode: command
    inputs:
      - name: container
        type: textfield
        title: Command
      - name: command
        type: textfield
        title: Command
